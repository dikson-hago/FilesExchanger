(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;b=a.FilesExchanger=a.FilesExchanger||{};c=b.Host=b.Host||{};d=c.JsModules=c.JsModules||{};e=d.SendFileJsModule=d.SendFileJsModule||{};f=d.DownloadFileJsModule=d.DownloadFileJsModule||{};g=d.DeviceNameJsModule=d.DeviceNameJsModule||{};h=d.FirstConnectionForReceiveJsModule=d.FirstConnectionForReceiveJsModule||{};i=d.FirstConnectionForSendJsModule=d.FirstConnectionForSendJsModule||{};j=c.Client=c.Client||{};k=a.FilesExchanger$Host_Templates=a.FilesExchanger$Host_Templates||{};l=a.WebSharper;m=l&&l.Concurrency;n=l&&l.Remoting;o=n&&n.AjaxRemotingProvider;p=l&&l.UI;q=p&&p.Var$1;r=p&&p.Templating;s=r&&r.Runtime;t=s&&s.Server;u=t&&t.ProviderBuilder;v=t&&t.Handler;w=t&&t.TemplateInstance;x=p&&p.Client;y=x&&x.Templates;e.Run$15$20=function(z){return function(A){var B;m.StartImmediate((B=null,m.Delay(function(){var C;C=A.Vars.Hole("filelocation").$1.Get();return m.TryWith(m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.InternalContext.SendFilesHandler.Send:548059207",[C]),function(D){z.Set("Status: "+D);return m.Zero();});}),function(D){if(D instanceof a.Error){z.Set("Status: unknown error");return m.Zero();}else throw D;});})),null);};};e.Run=function(){var z,A,B,C,D,E,F;z=q.Create$1("");return(A=(B=z.get_View(),(C=(D=new u.New$1(),(D.h.push(v.EventQ2(D.k,"onsend",function(){return D.i;},function(G){var H;m.StartImmediate((H=null,m.Delay(function(){var I;I=G.Vars.Hole("filelocation").$1.Get();return m.TryWith(m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.InternalContext.SendFilesHandler.Send:548059207",[I]),function(J){z.Set("Status: "+J);return m.Zero();});}),function(J){if(J instanceof a.Error){z.Set("Status: unknown error");return m.Zero();}else throw J;});})),null);})),D)),(C.h.push({$:2,$0:"sendfileresponse",$1:B}),C))),(E=v.CompleteHoles(A.k,A.h,[["filelocation",0,null]]),(F=new w.New(E[1],k.sendfileform(E[0])),A.i=F,F))).get_Doc();};f.Run$15$22=function(z){return function(A){var B;m.StartImmediate((B=null,m.Delay(function(){var C;C=A.Vars.Hole("targetfolderlocation").$1.Get();return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.DownloadFilesHandler.DownloadFile:548059207",[C]),function(D){z.Set("Status: "+a.String(D));return m.Zero();});})),null);};};f.Run=function(){var z,A,B,C,D,E,F;z=q.Create$1("");return(A=(B=z.get_View(),(C=(D=new u.New$1(),(D.h.push(v.EventQ2(D.k,"download",function(){return D.i;},function(G){var H;m.StartImmediate((H=null,m.Delay(function(){var I;I=G.Vars.Hole("targetfolderlocation").$1.Get();return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.DownloadFilesHandler.DownloadFile:548059207",[I]),function(J){z.Set("Status: "+a.String(J));return m.Zero();});})),null);})),D)),(C.h.push({$:2,$0:"downloadfileresponse",$1:B}),C))),(E=v.CompleteHoles(A.k,A.h,[["targetfolderlocation",0,null]]),(F=new w.New(E[1],k.downloadfileform(E[0])),A.i=F,F))).get_Doc();};g.Run$15$32=function(z){return function(){var A;m.StartImmediate((A=null,m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.GenerateDeviceNameHandler.GetName:-1957129334",[]),function(B){z.Set("Name: "+a.String(B));return m.Zero();});})),null);};};g.Run=function(){var z,A,B,C,D,E,F;z=q.Create$1("");return(A=(B=z.get_View(),(C=(D=new u.New$1(),(D.h.push(v.EventQ2(D.k,"generatedevicename",function(){return D.i;},function(){var G;m.StartImmediate((G=null,m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.GenerateDeviceNameHandler.GetName:-1957129334",[]),function(H){z.Set("Name: "+a.String(H));return m.Zero();});})),null);})),D)),(C.h.push({$:2,$0:"devicenameresponse",$1:B}),C))),(E=v.CompleteHoles(A.k,A.h,[]),(F=new w.New(E[1],k.generatedevicenameform(E[0])),A.i=F,F))).get_Doc();};h.Run$15$28=function(z){return function(){var A;m.StartImmediate((A=null,m.Delay(function(){return m.TryWith(m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.FirstConnectionForReceiveHandler.Connect:-1957129334",[]),function(B){z.Set("Status: "+a.String(B));return m.Zero();});}),function(B){if(B instanceof a.Error){z.Set("Status: disconnected");return m.Zero();}else throw B;});})),null);};};h.Run=function(){var z,A,B,C,D,E,F;z=q.Create$1("");return(A=(B=z.get_View(),(C=(D=new u.New$1(),(D.h.push(v.EventQ2(D.k,"waitconnection",function(){return D.i;},function(){var G;m.StartImmediate((G=null,m.Delay(function(){return m.TryWith(m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.FirstConnectionForReceiveHandler.Connect:-1957129334",[]),function(H){z.Set("Status: "+a.String(H));return m.Zero();});}),function(H){if(H instanceof a.Error){z.Set("Status: disconnected");return m.Zero();}else throw H;});})),null);})),D)),(C.h.push({$:2,$0:"testconnectionresponse",$1:B}),C))),(E=v.CompleteHoles(A.k,A.h,[]),(F=new w.New(E[1],k.tryconnectforreceiveform(E[0])),A.i=F,F))).get_Doc();};i.Run$15$24=function(z){return function(A){var B;m.StartImmediate((B=null,m.Delay(function(){var C;C=A.Vars.Hole("address").$1.Get();return m.TryWith(m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.FirstConnectionForSendHandler.Connect:548059207",[C]),function(D){z.Set("Status: "+a.String(D));return m.Zero();});}),function(D){if(D instanceof a.Error){z.Set("Status: disconnected");return m.Zero();}else throw D;});})),null);};};i.Run=function(){var z,A,B,C,D,E,F;z=q.Create$1("");return(A=(B=z.get_View(),(C=(D=new u.New$1(),(D.h.push(v.EventQ2(D.k,"tryconnect",function(){return D.i;},function(G){var H;m.StartImmediate((H=null,m.Delay(function(){var I;I=G.Vars.Hole("address").$1.Get();return m.TryWith(m.Delay(function(){return m.Bind((new o.New()).Async("FilesExchanger.Host:FilesExchanger.Host.Handlers.FirstConnectionForSendHandler.Connect:548059207",[I]),function(J){z.Set("Status: "+a.String(J));return m.Zero();});}),function(J){if(J instanceof a.Error){z.Set("Status: disconnected");return m.Zero();}else throw J;});})),null);})),D)),(C.h.push({$:2,$0:"testconnectionresponse",$1:B}),C))),(E=v.CompleteHoles(A.k,A.h,[["address",0,null]]),(F=new w.New(E[1],k.tryconnectforsendform(E[0])),A.i=F,F))).get_Doc();};j.DeviceNameModule=function(){return g.Run();};j.TestConnectionForReceiveModule=function(){return h.Run();};j.TestConnectionForSendModule=function(){return i.Run();};j.DownloadFileModule=function(){return f.Run();};j.SendFileModule=function(){return e.Run();};k.sendfileform=function(z){y.LoadLocalTemplates("main");return z?y.NamedTemplate("main",{$:1,$0:"sendfileform"},z):void 0;};k.downloadfileform=function(z){y.LoadLocalTemplates("main");return z?y.NamedTemplate("main",{$:1,$0:"downloadfileform"},z):void 0;};k.generatedevicenameform=function(z){y.LoadLocalTemplates("main");return z?y.NamedTemplate("main",{$:1,$0:"generatedevicenameform"},z):void 0;};k.tryconnectforreceiveform=function(z){y.LoadLocalTemplates("main");return z?y.NamedTemplate("main",{$:1,$0:"tryconnectforreceiveform"},z):void 0;};k.tryconnectforsendform=function(z){y.LoadLocalTemplates("main");return z?y.NamedTemplate("main",{$:1,$0:"tryconnectforsendform"},z):void 0;};}(self));
